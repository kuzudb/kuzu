-DATASET CSV EMPTY

--

-CASE DeleteAllTuples
-SKIP_IN_MEM
-STATEMENT call checkpoint_threshold=0
---- ok
-STATEMENT create node table Post (id INT64, imageFile STRING, creationDate INT64, locationIP STRING, browserUsed STRING, language STRING, content STRING, length INT32, PRIMARY KEY (id));
---- ok
-STATEMENT COPY Post FROM "${KUZU_ROOT_DIRECTORY}/dataset/ldbc-sf01/Post.csv"(parallel=false)
---- ok
-STATEMENT call fsm_info() return *
---- 0
-STATEMENT match (p:Post) delete p
---- ok
# copy again, page allocation should start from 0 as the dropped pages are reclaimed + truncated
-STATEMENT COPY Post FROM "${KUZU_ROOT_DIRECTORY}/dataset/ldbc-sf01/Post.csv"(parallel=false)
---- ok
-STATEMENT call fsm_info() return count(*)
---- 1
1
-STATEMENT CALL storage_info('Post') where start_page_idx = 0 return count(*)
---- 1
0
-RELOADDB
# try some queries
-STATEMENT match(p:Post) return count(*)
---- 1
135701
-STATEMENT match(p:Post) where p.id = 481036337190 return p.imageFile
---- 1
photo481036337190.jpg
-STATEMENT match(p:Post) where p.id = 1030792523146 return p.imageFile
---- 1
photo1030792523146.jpg
