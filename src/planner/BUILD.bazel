load("@rules_cc//cc:defs.bzl", "cc_library")

cc_library(
    name = "enumerator",
    srcs = [
        "enumerator.cpp",
        "subplans_table.cpp",
    ],
    hdrs = [
        "include/enumerator.h",
        "include/subplans_table.h",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "logical_plan",
        "//src/binder:bound_queries",
        "//src/storage:graph",
    ],
)

cc_library(
    name = "logical_plan",
    srcs = [
        "logical_plan/logical_plan.cpp",
    ],
    hdrs = [
        "include/logical_plan/logical_plan.h",
        "include/logical_plan/operator/crud/logical_crud_node.h",
        "include/logical_plan/operator/extend/logical_extend.h",
        "include/logical_plan/operator/filter/logical_filter.h",
        "include/logical_plan/operator/flatten/logical_flatten.h",
        "include/logical_plan/operator/hash_join/logical_hash_join.h",
        "include/logical_plan/operator/limit/logical_limit.h",
        "include/logical_plan/operator/load_csv/logical_load_csv.h",
        "include/logical_plan/operator/logical_operator.h",
        "include/logical_plan/operator/multiplicity_reducer/logical_multiplcity_reducer.h",
        "include/logical_plan/operator/projection/logical_projection.h",
        "include/logical_plan/operator/scan_node_id/logical_scan_node_id.h",
        "include/logical_plan/operator/scan_property/logical_scan_node_property.h",
        "include/logical_plan/operator/scan_property/logical_scan_rel_property.h",
        "include/logical_plan/operator/skip/logical_skip.h",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "schema",
        "//src/binder:expression",
    ],
)

cc_library(
    name = "schema",
    srcs = [
        "logical_plan/schema.cpp",
    ],
    hdrs = [
        "include/logical_plan/schema.h",
    ],
    visibility = [
        "//visibility:public",
    ],
    deps = [
        "//src/common:utils",
    ],
)
